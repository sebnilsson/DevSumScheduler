@model IEnumerable<DevSumScheduler.ViewModels.ScheduleTable>
@{
    Func<string, string, string> GetRowId = (day, time) => {
        string key = string.Concat(day, "-", time);
        return HttpUtility.HtmlAttributeEncode(key).ToLower();
    };
}

<div id="schedule-tables">
    @foreach(var table in Model) {
        <table>
            <thead>
                <tr>
                    <td class="table-title">@table.Title
                    </td>
                    @foreach(var header in table.Headers) {
                        <td class="table-header">@header
                        </td>
                    }
                </tr>
            </thead>
            <tbody>
                @foreach(var row in table.Rows) {
                    <tr data-row-id="@GetRowId(table.Title, row.Key)">
                        <td class="row-item-time">@row.Key
                        </td>
                        @foreach(var item in row.Value) {
                            var singleItemClass = (row.Value.Count() <= 1) ? "row-item single-row-item" : "row-item";
                            <td class="@singleItemClass">
                                <span class="item-title">@item.Title</span>
                                <div class="clear"></div>
                                <span class="item-speaker"><a href="@item.SpeakerUrl">@item.Speaker</a></span>
                            </td>
                        }
                    </tr>
                }
            </tbody>
        </table>
    }
</div>
